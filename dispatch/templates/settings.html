<div class="entry_title_container">
    <h1>Settings</h1>
</div>
<div class="entry_content">
    <h2>Manage Feeds</h2>
    <h3>Add feed</h3>
    <form id="add_feed_form" hx-post="/add_feed" hx-params="*" hx-target="#feed_entry_item">
        <label for="feed_url">Enter Feed URL:</label>
        <input type="text" id="feed_url" name="feed_url">
        <button type="submit">Add Feed</button>
    </form>
    <h3>Import from OPML</h3>
    <form hx-post="/upload_opml" enctype="multipart/form-data" hx-target="#feed_entry_item">
        <p><input type="file" name="opml_file" accept=".opml"></p>
        <p><input type="submit" value="Submit"></p>
    </form>
    <!-- This div will show the result of the form submission -->
    <div id="add_feed_result" hx-target="#add_feed_result">
    </div>
    <table>
        <thead>
            <tr>
                <th>Feed</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for feed in feeds %}
            <tr>
                <td class="settings_table_feed_card">
                    <div class="feed_card_left">
                        {% if not feed.favicon_path %}
                        <span>{% include 'bx-rss.svg' %}</span>
                        {% else %}
                        <span><img class="feed_icon" src="{{ url_for('static', filename=feed.favicon_path ) }}"></span>
                        {% endif %}
                        <span class="feed_card_title">{{ feed.title }}</span>
                    </div>
                </td>
                <td>
                    <button class="delete_button" hx-get="/delete_feed/{{ feed.id }}"
                        data-feed-id="{{ feed.id }}">Delete</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>


    <h2>Visuals</h2>
    <h3>Theme</h3>
    <form id="theme_form" hx-post="/set_default_theme" hx-target="#root_style" hx-swap="outerHTML">
        <label for="theme">Select a theme:</label>
        <select id="theme" name="theme">
            <option hx-post="/set_theme" hx-target="#root_style" hx-swap="outerHTML" value="light">Light</option>
            <option hx-post="/set_theme" hx-target="#root_style" hx-swap="outerHTML" value="dark">Dark</option>
            <option hx-post="/set_theme" hx-target="#root_style" hx-swap="outerHTML" value="clean">Clean</option>
        </select>
        <button type="submit">Set Default</button>
        </form>
</div>